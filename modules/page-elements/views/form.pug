//- widgets/form.pug

include ../../page-elements/views/form/field.pug
include ../../page-elements/views/form/hidden.pug
include ../../page-elements/views/form/select.pug
include ../../page-elements/views/form/textarea.pug
include ../../page-elements/views/form/group.pug
include ../../page-elements/views/form/address.pug

mixin form(form, action)
  form#form.form(method='POST', action=action, name=form.name)
    each section, section_name in form.sections
      fieldset(class=section_name)
        legend= __(section.label)
        each field in section.fields
          if field.type == 'hidden'
            + hidden(field.name, field.value)
          else if field.type == 'textarea'
            + textarea(Object.assign({}, field))
          else if field.type == 'select'
            + select(Object.assign({}, field))
          else if field.type == 'address'
            + address(field.label, field.name, field.prefix)
          else if field.type == 'group'
            + group(field.label, field.name, field.fields)
          else
            + field(Object.assign({}, field))
