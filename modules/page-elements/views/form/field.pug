//- widgets/form/field.pug
mixin field(pretext, attr, posttext)
  .field(class='field_' + (attr.class ? attr.class : attr.name))
    .field-label= __(pretext)
    .field-value
      .field-value-input(class='field-value-input-' + attr.name)
        if attr.entries
          - i = 0
          each label, value in attr.entries
            input(
              class='input-' + attr.type,
              type=attr.type,
              name=attr.name,
              value=value,
              id=attr.name + i,
              checked=(attr.type == 'radio' && value == post[attr.name])
            )
            label(class=attr.type + '-label', for=attr.name + i++)= __(label)
        else
          if post[attr.name]
            if attr.type != 'checkbox'
              - attr.value = post[attr.name]
          else
            if attr.value != ''
              - attr.value = __(attr.value)
          if attr.placeholder != ''
            - attr.placeholder = __(attr.placeholder)
          input(
            class='input-' + attr.type,
            id=attr.name,
            checked=(attr.type == 'checkbox' && attr.value == post[attr.name])
          )&attributes(attr)
        if posttext
          label(class=attr.type + '-label', for=attr.name)= __(posttext)
